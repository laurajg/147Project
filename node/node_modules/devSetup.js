module.exports = {

	loadDatabase: function() {
        var MongoClient = require('mongodb').MongoClient, format = require('util').format;
       	if (typeof process.env.MONGOHQ_URL == 'undefined' || process.env.MONGOHQ_URL.length == 0) {
            var host = require('os').hostname();
            dbLoc = 'mongodb://' + host + ':27017/goalglance'    
        } else {
            dbLoc = process.env.MONGOHQ_URL;
        }        
        console.log(dbLoc);
		MongoClient.connect(dbLoc, function(err, db) {
            if(err) return next(err);
           	var collection = db.collection('users');
  	       	if (typeof process.env.MONGOHQ_URL == 'undefined' || process.env.MONGOHQ_URL.length == 0) {
				collection.drop();
			

				var users = [{
								'username': 'amber',
					            'email': 'amberr@stanford.edu',
					            'password': 'pw',
					            'goal': 'Quit smoking',
					            'photos': [{'url': 'http://siklusair.com/wp-content/uploads/2013/07/lungs-after-smoking-for-1-year.png', 'added_at': new Date(), 'type': 0},
					            		   {'url': 'text://This is a test of a text based motivation', 'added_at': new Date(), 'type': 0},
					                       {'url': 'http://www.ncregister.com/images/uploads/happy_old_lady.jpg', 'added_at': new Date(), 'type': 1}],
					            'reminders': [{'hour': '8', 'minute': '30', 'ampm': 'am', 'days': 'MWF'},
					            			  {'hour': '5', 'minute': '00', 'ampm': 'pm','days': 'MWF'}]
				              },
				              {
				              	'username': 'laura',
					            'email': 'laurajadegriffiths@gmail.com',
					            'password': 'pw',
					            'goal': 'Save money',
					            'photos': [{'url': 'http://www.eiffel-tower.us/Eiffel-Tower-Images/eiffel-tower-landmark-4.jpg', 'added_at': new Date(), 'type': 0},
					            		   {'url': 'text://$500 dollars saved toward a trip to Europe!', 'added_at': new Date(), 'type': 0, 'new': true},
					                       {'url': 'http://www.topworldplaces.com/wp-content/themes/dt-cardamon/timthumb.php?src=/wp-content/uploads/2012/11/places-to-visit-in-europe.jpg&zc=1&w=510&h=320', 'added_at': new Date(), 'type': 1, 'new':true},
					                       {'url': 'http://media-cache-ak0.pinimg.com/736x/f6/20/6b/f6206bcd78f70342acb288b1861298b1.jpg', 'added_at': new Date(), 'type': 1, 'new': true},
					                       {'url': 'http://media-cache-ec0.pinimg.com/736x/dc/7a/30/dc7a303748ecb6f28ca1759b81cb970d.jpg', 'added_at': new Date(), 'type': 1, 'new': true},
					                       {'url': 'http://media-cache-ak0.pinimg.com/736x/fe/b9/a1/feb9a1b446daed8ac834a7bf3eed5e30.jpg', 'added_at': new Date(), 'type': 1, 'new': true},
					                       {'url': 'http://media-cache-ak0.pinimg.com/736x/17/fb/6c/17fb6c5ba0689a9355c05ce4b319d2ba.jpg', 'added_at': new Date(), 'type': 1, 'new': true},
					                       {'url': 'text://If I want to go this summer, I need to save $2000 more!', 'added_at': new Date(), 'type': 0},
					                       {'url': 'http://media-cache-ec0.pinimg.com/736x/c6/e8/6a/c6e86adc68949a67c160e82099064780.jpg', 'added_at': new Date(), 'type': 1},
					                       {'url': 'http://media-cache-ak0.pinimg.com/736x/ff/c5/bf/ffc5bf1e04a0492c85067eb8d55c5caf.jpg', 'added_at': new Date(), 'type': 1},
					                       {'url': 'http://media-cache-ak0.pinimg.com/736x/07/87/e9/0787e95e262878beb6f6ae3e1f13620d.jpg', 'added_at': new Date(), 'type': 1},
					                       {'url': 'http://media-cache-ec0.pinimg.com/736x/0f/7e/b0/0f7eb014cc0ca0c254b1fdec61b81637.jpg', 'added_at': new Date(), 'type': 1},
					                       {'url': 'text://Didn\t buy a new phone so I could put money toward the trip!', 'added_at': new Date(), 'type': 0},
					                       {'url': 'http://media-cache-ec0.pinimg.com/736x/ba/be/2f/babe2f8842537ad69a125c1b3ae5f730.jpg', 'added_at': new Date(), 'type': 1},
					                       {'url': 'http://media-cache-ak0.pinimg.com/736x/f0/01/21/f00121da1778ab3c05cc1977920ca493.jpg', 'added_at': new Date(), 'type': 1}],
					            'reminders': [{'hour': '10', 'minute': '15', 'ampm': 'am', 'days': 'TR'},
					            			  {'hour': '8', 'minute': '05', 'ampm': 'pm','days': 'F'}]
				              },
				              {	'username': 'asif',
					            'email': 'asifkhan89@gmail.com',
					            'password': 'pw',
					            'goal': 'Learn to dance',
					            'photos': [{'url': 'http://scm-l3.technorati.com/13/01/16/74503/salsa-dancers.jpg', 'added_at': new Date(), 'type': 0},
					            		   {'url': 'text://This is a test of a text based motivation', 'added_at': new Date(), 'type': 0},
					                       {'url': 'https://s3.amazonaws.com/assets.kickofflabs.com/backgrounds/site/background_image/5031/nycsonbg.jpg', 'added_at': new Date(), 'type': 1}],
					            'reminders': [{'hour': '6', 'minute': '30', 'ampm': 'am', 'days': 'M'},
					            			  {'hour': '10', 'minute': '00', 'ampm': 'pm','days': 'F'}]
				              }
				          ]

				for(var i=0; i<users.length; i++) {
					collection.insert(users[i], function(err) {if(err) throw err;});
				}
		}

			collection.find({}).toArray(function(err, results) {
			  	console.log(results);
			});
        });

	}
}