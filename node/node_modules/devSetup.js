module.exports = {

	loadDatabase: function() {
        var MongoClient = require('mongodb').MongoClient, format = require('util').format;
       	if (typeof process.env.MONGOHQ_URL == 'undefined' || process.env.MONGOHQ_URL.length == 0) {
            var host = require('os').hostname();
            dbLoc = 'mongodb://' + host + ':27017/goalglance'    
        } else {
            dbLoc = process.env.MONGOHQ_URL;
        }        
        console.log(dbLoc);
		MongoClient.connect(dbLoc, function(err, db) {
            if(err) return next(err);
           	var collection = db.collection('users');
			collection.drop();

			var users = [{
							'username': 'amber',
				            'email': 'amberr@stanford.edu',
				            'password': 'pw',
				            'goal': 'Quit smoking',
				            'photos': [{'url': 'http://siklusair.com/wp-content/uploads/2013/07/lungs-after-smoking-for-1-year.png', 'added_at': new Date(), 'type': 0},
				                       {'url': 'http://www.ncregister.com/images/uploads/happy_old_lady.jpg', 'added_at': new Date(), 'type': 1}],
				            'reminders': [{'hour': '8', 'minute': '30', 'ampm': 'am', 'days': 'MWF'},
				            			  {'hour': '5', 'minute': '00', 'ampm': 'pm','days': 'MWF'}]
			              },
			              {
			              	'username': 'laura',
				            'email': 'laurajadegriffiths@gmail.com',
				            'password': 'pw',
				            'goal': 'Save money',
				            'photos': [{'url': 'http://www.eiffel-tower.us/Eiffel-Tower-Images/eiffel-tower-landmark-4.jpg', 'added_at': new Date(), 'type': 0},
				                       {'url': 'http://www.topworldplaces.com/wp-content/themes/dt-cardamon/timthumb.php?src=/wp-content/uploads/2012/11/places-to-visit-in-europe.jpg&zc=1&w=510&h=320', 'added_at': new Date(), 'type': 1},
				                       ],
				            'reminders': [{'hour': '10', 'minute': '15', 'ampm': 'am', 'days': 'TR'},
				            			  {'hour': '8', 'minute': '05', 'ampm': 'pm','days': 'F'}]
			              },
			              {	'username': 'asif',
				            'email': 'asifkhan89@gmail.com',
				            'password': 'pw',
				            'goal': 'Learn to dance',
				            'photos': [{'url': 'http://scm-l3.technorati.com/13/01/16/74503/salsa-dancers.jpg%3Ft%3D20130116184141g', 'added_at': new Date(), 'type': 0},
				                       {'url': 'https://s3.amazonaws.com/assets.kickofflabs.com/backgrounds/site/background_image/5031/nycsonbg.jpg', 'added_at': new Date(), 'type': 1}],
				            'reminders': [{'hour': '6', 'minute': '30', 'ampm': 'am', 'days': 'M'},
				            			  {'hour': '10', 'minute': '00', 'ampm': 'pm','days': 'F'}]
			              }
			          ]

			for(var i=0; i<users.length; i++) {
				collection.insert(users[i], function(err) {if(err) throw err;});
			}

			collection.find({}).toArray(function(err, results) {
			  	console.log(results);
			});
        });

	}
}